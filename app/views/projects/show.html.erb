<%- model_class = Project -%>

<!-- Back buttons -->
  <div class="col-lg-12" style="text-align:center;">
    
      <%= link_to '<i class="fa fa-chevron-left"></i>'.html_safe,
                    projects_path, :class => 'btn btn-default',
                    :title => 'Back to Projects' %>
      <%= link_to '<i class="fa fa-edit"></i>'.html_safe,
                    edit_project_path(@project), :class => 'btn btn-primary', 
                    :title => 'Edit Project'  %>
      <%= link_to '<i class="fa fa-remove"></i>'.html_safe,
                    project_path(@project),
                    :method => 'delete',
                    :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                    :class => 'btn btn-danger', :title => 'Delete Project' %>
    <hr>
  </div>
<!-- end Back buttons -->

<!--<div class="page-header"><h1><%#=t '.title', :default => model_class.model_name.human.titleize %></h1></div>-->

<!-- left column 1/3 -->
  <div class="col-lg-4">
    <% @project_picons.each do |p| %>
          <%= image_tag p.picon_url, :style => 'max-width:90%;padding:5%;' %><br>
          
          <div style="margin-left:auto;margin-right:auto;text-align:center;">
          <%= link_to '<i class="fa fa-edit"></i>'.html_safe,
                edit_project_picon_path(p), :class => 'btn btn-primary', 
                :title => 'Edit Attachment'  %>
          <%#= link_to "Destroy Attachment", destroy_associate_attachment_path(p) %>
          <%= link_to '<i class="fa fa-remove"></i>'.html_safe,
                project_picon_path(p),
                :method => 'delete',
                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                :class => 'btn btn-danger', :title => 'Delete Attachment'  %>
          </div>
          
    <% end %>
  </div>
<!-- end left column 1/3 -->

<!-- right column 2/3 -->
  <div class="col-lg-8">
    <div class="show1">
            <%= @project.name %>
            
            <span style="margin-left:40px;">
              <% if @project.status == 'Prospect' %>
                <i class="fa fa-check" style="color:#6991fd" title="Prospect"></i> Prospect
              <% elsif @project.status == 'Complete' %>
                <i class="fa fa-check" style="color:#e661ac" title="Complete"></i> Complete
              <% else %>
                <i class="fa fa-check" style="color:#e78b23" title="In Process"></i> In Process
              <% end %>
              
            </span>
    </div>
    
    <% if @services.length >= 1 %>
      <div class="show3">
              <span>
                Services Provided:
                <% @services.each do |p| %>
                  <%= p.name %> 
                <% end %>
              </span>
      </div>
    <% end %>
    <hr>
    
    <% if @project.project_street.length >= 1 %>
      <div class="show2">
        Project location:
      </div>
      <div class="show2">
        <%= @project.project_street %>
      </div>
      <div class="show2">
        <%= @project.project_city %>, <%= @project.project_state %> <%= @project.project_zip %>
      </div>
      <hr>
    <% end %>
    
    <% if @project.project_start.length >= 1 %>
      <div class="show3">
        Project Start: <%= @project.project_start %>
      </div>
    <% end %>
    <% if @project.project_finish.length >= 1 %>
      <div class="show3">
        Project Finish: <%= @project.project_finish %>
      </div>
    <% end %>
    <% if @project.project_start.length >= 1 || @project.project_finish.length >= 1 %>
    
    
    <% finish_parsed_time = Time.strptime(@project.project_finish,"%m/%d/%Y") %>
    <% start_parsed_time = Time.strptime(@project.project_start,"%m/%d/%Y") %>

    <div class="show3">
      Project Duration:
    <%= (finish_parsed_time.to_date - start_parsed_time.to_date).to_i %> days
    </div>
    
    <hr>
    <% end %>
    
  
    <% if @project.client_name.length >= 1 %>
      <div class="show2">
        Client: <%= @project.client_name %>
      </div>
      <div class="show2">
        <div class="col-lg-12">
          <% @project_cicons.each do |p| %>
                <%= image_tag p.cicon_url, :style => 'max-width:300px;max-height:200px;padding:5%;' %><br>
                
                <div style="margin-left:100px;">
                <%= link_to '<i class="fa fa-edit"></i>'.html_safe,
                      edit_project_cicon_path(p), :class => 'btn btn-primary', 
                      :title => 'Edit Attachment'  %>
                <%#= link_to "Destroy Attachment", destroy_associate_attachment_path(p) %>
                <%= link_to '<i class="fa fa-remove"></i>'.html_safe,
                      project_cicon_path(p),
                      :method => 'delete',
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-danger', :title => 'Delete Attachment'  %>
                </div>
                
          <% end %>
        </div>
      </div>
    <!-- leave this as the start divider point -->
    <hr style="clear:both;">      
      
    <% end %>
    
    

    
    
    
    <% if @project.client_contact.length >= 1 %>
      <div class="show3">      
          <%= model_class.human_attribute_name(:client_contact) %>:
          <%= @project.client_contact %>
      </div>
    <% end %>
    
    <% if @project.client_meeting.length >= 1 %>
      <div class="show3">      
          <%= model_class.human_attribute_name(:client_meeting) %>:
          <%= @project.client_meeting %>
      </div>
    <% end %>
    
    <% if @project.client_proposal.length >= 1 %>
      <div class="show3">      
          <%= model_class.human_attribute_name(:client_proposal) %>:
          <%#= @project.additional_terms %>
          <%= simple_format(@project.client_proposal) %>
      </div>
    <% end %>
    
    
    <% if @project.client_billing.length >= 1 %>
      <hr>
      <div class="show3">      
          <%= model_class.human_attribute_name(:client_billing) %>:
      </div>
    
      <div class="show3">      
          <%= @project.client_billing %><br>
          <%= @project.client_street %><br>
          <%= @project.client_city %>,
          <%= @project.client_state %>
          <%= @project.client_zip %>
      </div>
      <hr>
    <% end %>

    
  <% if @project.brief_description.length >= 1 %>
    <div class="show3">
    Description:  <%#= @project.brief_description %>
    <%= simple_format(@project.brief_description) %>
    </div>
  <% end %>
  
  <% if @project.staffing_notes.length >= 1 %>
    <div class="show3">
        <%= model_class.human_attribute_name(:staffing_notes) %>:
        <%#= @project.staffing_notes %>
        <%= simple_format(@project.staffing_notes) %>
    </div>
  <% end %>
    
  <% if @project.deal_terms.length >= 1 %>
    <div class="show3">      
        <%= model_class.human_attribute_name(:deal_terms) %>:
        <%#= @project.deal_terms %>
        <%= simple_format(@project.deal_terms) %>
    </div>
  <% end %>
  
  <% if @project.rate.length >= 1 %>
    <div class="show3">      
        <%= model_class.human_attribute_name(:rate) %>:
        <%= @project.rate %>
    </div>
  <% end %>
  
  <% if @project.additional_terms.length >= 1 %>
    <div class="show3">      
        <%= model_class.human_attribute_name(:additional_terms) %>:
        <%#= @project.additional_terms %>
        <%= simple_format(@project.additional_terms) %>
    </div>
  <% end %>
  
  
     <script type="text/javascript">
      $(document).ready(function() {
          $(".tag-test").tagit({
          
              // Options
              readOnly: true,
   
              // Events
              onTagClicked: function(event, ui) {
                  console.log(ui.tag);
                  console.log(ui.tagLabel);
                  //window.location = ui.tag;
                  window.open(ui.tagLabel);
              },
              onTagLimitExceeded: function(event, ui) {
                  console.log(ui.tag);
              }
          
          });
  
      });
    </script> 
    
  <% if @project.link.length >= 1 %>
    <%= form_for @project, :html => { :class => "form-horizontal project" } do |f| %>
        <div class="show3">
          <%= model_class.human_attribute_name(:document_links) %>:
          <%= f.text_field :link, :class => 'form-control tag-test' %>
        </div>
    <% end %>
  <% end %>
    
    <!-- where I am using this with the tags it is no longer working -->
     <script> 
      $('.linkto').each(function(){
       $(this).html( $(this).html().replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g, '<a href="$1" target="_blank">$1</a>') );
      });
    </script> 
    
    
        <!-- Lat and long stuff - will potentially need for checking geocoder creations -->
        <!--
        <%#= model_class.human_attribute_name(:latitude) %>:
        <%#= @project.latitude %><br>
        <%#= model_class.human_attribute_name(:longitude) %>:
        <%#= @project.longitude %><br><br>
        -->
        <!-- END Lat and long stuff - will potentially need for checking geocoder creations -->
        
        
    <!-- commented out associations between projects and associates
    <div class="show3">    
        <%#= model_class.human_attribute_name(:associates) %>:  
          <%# @associates.each do |associate| %>
            <dd><%#= link_to associate.name, associate_path(associate) %></dd>
          <%# end %>
    </div>
    -->
    
  </div>
<!-- end right column 2/3 -->



<div class="col-lg-12" style="text-align:center;">
  <hr>
    <%= link_to '<i class="fa fa-chevron-left"></i>'.html_safe,
                  projects_path, :class => 'btn btn-default',
                  :title => 'Back to Projects' %>
    <%= link_to '<i class="fa fa-edit"></i>'.html_safe,
                  edit_project_path(@project), :class => 'btn btn-primary', 
                  :title => 'Edit Project'  %>
    <%= link_to '<i class="fa fa-remove"></i>'.html_safe,
                  project_path(@project),
                  :method => 'delete',
                  :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                  :class => 'btn btn-danger', :title => 'Delete Project' %>
  <hr>
</div>


<!-- originals -->
<%#= link_to t('.back', :default => t("helpers.links.back")),
              projects_path, :class => 'btn btn-default'  %>
<%#= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_project_path(@project), :class => 'btn btn-default' %>
<%#= link_to t('.destroy', :default => t("helpers.links.destroy")),
              project_path(@project),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
<!-- originals -->
